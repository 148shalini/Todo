{"ast":null,"code":"import React,{useEffect,useState}from'react';import Sidebar from'./component/sidebar';// your reusable Sidebar component\nimport Home from'./pages/home';import GroupChat from'./pages/groupChat';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const Layout=()=>{const[groups,setGroups]=useState(JSON.parse(localStorage.getItem(\"groups\"))||[]);// const [selectedGroup, setSelectedGroup] = useState({});\nconst[selectedGroup,setSelectedGroup]=useState(null);const[groupMessages,setGroupMessages]=useState(JSON.parse(localStorage.getItem(\"groupsMessages\"))||{});// stores messages per group\nuseEffect(()=>{localStorage.setItem('groups',JSON.stringify(groups));},[groups]);useEffect(()=>{localStorage.setItem('groupsMessages',JSON.stringify(groupMessages));},[groupMessages]);const handleSendMessage=(groupId,messageText)=>{const formatDate=date=>{const day=date.getDate();const month=date.toLocaleString('default',{month:'long'});const year=date.getFullYear();const time=date.toLocaleTimeString([],{hour:'2-digit',minute:'2-digit',hour12:true});return`${day} ${month} ${year} . ${time}`;};const newMessage={text:messageText,timestamp:formatDate(new Date())};setGroupMessages(prev=>({...prev,[groupId]:[...(prev[groupId]||[]),newMessage]}));console.log(groupMessages);};return/*#__PURE__*/_jsxs(\"div\",{className:\"flex h-screen w-screen\",children:[/*#__PURE__*/_jsx(Sidebar,{groups:groups,setGroups:setGroups,setSelectedGroup:setSelectedGroup}),/*#__PURE__*/_jsx(_Fragment,{children:selectedGroup?/*#__PURE__*/_jsx(GroupChat,{group:selectedGroup,messages:groupMessages[selectedGroup.id]||[],onSendMessage:message=>handleSendMessage(selectedGroup.id,message)}):/*#__PURE__*/_jsx(Home,{})})]});};export default Layout;","map":{"version":3,"names":["React","useEffect","useState","Sidebar","Home","GroupChat","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","Layout","groups","setGroups","JSON","parse","localStorage","getItem","selectedGroup","setSelectedGroup","groupMessages","setGroupMessages","setItem","stringify","handleSendMessage","groupId","messageText","formatDate","date","day","getDate","month","toLocaleString","year","getFullYear","time","toLocaleTimeString","hour","minute","hour12","newMessage","text","timestamp","Date","prev","console","log","className","children","group","messages","id","onSendMessage","message"],"sources":["D:/reacttutorial/todo/src/pocketNotes/layout.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport Sidebar from './component/sidebar';// your reusable Sidebar component\r\nimport Home from './pages/home';\r\nimport GroupChat from './pages/groupChat';\r\n\r\nconst Layout = () => {\r\n\r\n    const [groups, setGroups] = useState(JSON.parse(localStorage.getItem(\"groups\")) || []);\r\n    // const [selectedGroup, setSelectedGroup] = useState({});\r\n    const [selectedGroup, setSelectedGroup] = useState(null);\r\n    const [groupMessages, setGroupMessages] = useState(JSON.parse(localStorage.getItem(\"groupsMessages\")) || {}); // stores messages per group\r\n   \r\n    useEffect(()=>{\r\n      localStorage.setItem('groups',JSON.stringify(groups));\r\n    },[groups]);\r\n\r\n    useEffect(()=>{\r\n      localStorage.setItem('groupsMessages',JSON.stringify(groupMessages));\r\n    },[groupMessages])\r\n\r\n    const handleSendMessage = (groupId, messageText) => {\r\n      const formatDate = (date) => {\r\n        const day = date.getDate();\r\n        const month = date.toLocaleString('default', { month: 'long' });\r\n        const year = date.getFullYear();\r\n        const time = date.toLocaleTimeString([], {\r\n          hour: '2-digit',\r\n          minute: '2-digit',\r\n          hour12: true,\r\n        });\r\n        return `${day} ${month} ${year} . ${time}`;\r\n      };\r\n      const newMessage = {\r\n        text: messageText,\r\n        timestamp: formatDate(new Date()) \r\n      };\r\n    \r\n      setGroupMessages((prev) => ({\r\n        ...prev,\r\n        [groupId]: [...(prev[groupId] || []), newMessage],\r\n      }));\r\n\r\n      console.log(groupMessages);\r\n      \r\n    };\r\n    \r\n    \r\n    return (\r\n    <div className='flex h-screen w-screen'>\r\n      <Sidebar groups={groups} setGroups={setGroups} setSelectedGroup={setSelectedGroup}/>\r\n    \r\n       <>\r\n        {selectedGroup ? (\r\n          <GroupChat\r\n            group={selectedGroup}\r\n            messages={groupMessages[selectedGroup.id] || []}\r\n            onSendMessage={(message) => handleSendMessage(selectedGroup.id,message)}\r\n          />\r\n        ) : (\r\n          <Home />\r\n        )}\r\n      </>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Layout;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}